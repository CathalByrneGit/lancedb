% Generated by roxygen2: do not edit by hand
\name{lancedb_search}
\alias{lancedb_search}
\title{Create a Vector Search Query}
\usage{
lancedb_search(
  table,
  query_vector,
  nprobes = NULL,
  refine_factor = NULL,
  ef = NULL,
  column = NULL,
  distance_type = NULL,
  bypass_vector_index = FALSE
)
}
\arguments{
\item{table}{A \code{lancedb_table} object.}
\item{query_vector}{A numeric vector to use as the search query.}
\item{nprobes}{Integer. Number of IVF partitions to search (default: 20).
  Higher values increase recall but reduce speed.}
\item{refine_factor}{Integer. Multiplier for refining PQ results. Higher
  values increase accuracy after quantization. Default \code{NULL}.}
\item{ef}{Integer. Number of candidates for HNSW search. Higher values
  increase recall. Only used with HNSW indices. Default \code{NULL}.}
\item{column}{Character. Name of the vector column to search. Required if
  the table has multiple vector columns. Default \code{NULL}.}
\item{distance_type}{Character. Override distance metric at query time.
  One of \code{"l2"}, \code{"cosine"}, \code{"dot"}. Default \code{NULL}.}
\item{bypass_vector_index}{Logical. If \code{TRUE}, perform exhaustive flat
  search instead of using the index. Default \code{FALSE}.}
}
\value{
A \code{lancedb_lazy} object in \code{"search"} mode.
}
\description{
Begins a lazy vector similarity search on a LanceDB table. The query is not
executed until \code{\link[dplyr]{collect}} is called. Use dplyr verbs
(\code{filter}, \code{select}, \code{slice_head}) to refine the query.

Results include a \code{_distance} column with the similarity score.
}
\examples{
\dontrun{
library(dplyr)

con <- lancedb_connect("/tmp/my_lancedb")
tbl <- lancedb_open_table(con, "embeddings")

# Basic vector search
results <- lancedb_search(tbl, runif(128)) \%>\%
  filter(category == "science") \%>\%
  select(title, category) \%>\%
  slice_head(n = 10) \%>\%
  collect()

# Tuned search with more IVF probes and PQ refinement
results <- lancedb_search(tbl, runif(128),
                          nprobes = 50,
                          refine_factor = 10) \%>\%
  slice_head(n = 20) \%>\%
  collect()

# Search a specific vector column with cosine distance
results <- lancedb_search(tbl, runif(128),
                          column = "embedding",
                          distance_type = "cosine") \%>\%
  collect()
}
}
\seealso{
\code{\link{lancedb_fts_search}}, \code{\link{lancedb_scan}}
}
