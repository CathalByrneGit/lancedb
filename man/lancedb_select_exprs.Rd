% Generated by roxygen2: do not edit by hand
\name{lancedb_select_exprs}
\alias{lancedb_select_exprs}
\title{Select Computed Columns via SQL Expressions}
\usage{
lancedb_select_exprs(.data, ...)
}
\arguments{
\item{.data}{A \code{lancedb_lazy} object.}
\item{...}{Named character strings. Each name becomes an output column name;
  each value is a SQL expression evaluated against the table data by the
  DataFusion query engine.}
}
\value{
A new \code{lancedb_lazy} object with the dynamic column projection appended.
}
\description{
Adds a dynamic column projection to the lazy query using SQL expressions
evaluated by the DataFusion engine. Unlike \code{\link[dplyr]{select}}, which
only picks existing columns by name, \code{lancedb_select_exprs()} can compute
new derived columns using arbitrary SQL expressions. This corresponds to
LanceDB's \code{Select::Dynamic} projection.
}
\details{
Supported SQL functions include standard DataFusion functions:
arithmetic (\code{+}, \code{-}, \code{*}, \code{/}), string functions
(\code{upper()}, \code{lower()}, \code{concat()}, \code{substr()}),
type casts (\code{CAST(x AS TYPE)}), and conditional expressions
(\code{CASE WHEN ... END}).
}
\examples{
\dontrun{
library(dplyr)

con <- lancedb_connect("/tmp/my_lancedb")
tbl <- lancedb_open_table(con, "my_table")

# Compute derived columns
results <- lancedb_scan(tbl) \%>\%
  lancedb_select_exprs(
    score_pct  = "score * 100",
    name_upper = "upper(name)",
    id_str     = "CAST(id AS VARCHAR)"
  ) \%>\%
  slice_head(n = 10) \%>\%
  collect()

# After vector search, include original columns + normalised distance
results <- lancedb_search(tbl, runif(128)) \%>\%
  lancedb_select_exprs(
    name      = "name",
    score     = "score",
    norm_dist = "_distance / 100"
  ) \%>\%
  slice_head(n = 5) \%>\%
  collect()

# Conditional expression
results <- lancedb_scan(tbl) \%>\%
  lancedb_select_exprs(
    name       = "name",
    score_band = "CASE WHEN score > 0.8 THEN 'high' WHEN score > 0.5 THEN 'mid' ELSE 'low' END"
  ) \%>\%
  collect()
}
}
\seealso{
\code{\link[dplyr]{select}}, \code{\link{lancedb_scan}},
\code{\link{lancedb_search}}
}
