% Generated by roxygen2: do not edit by hand
\name{lancedb_merge_insert}
\alias{lancedb_merge_insert}
\title{Merge Insert (Upsert) Data into a Table}
\usage{
lancedb_merge_insert(
  table,
  data,
  on,
  when_matched_update_all = TRUE,
  when_not_matched_insert_all = TRUE,
  when_not_matched_by_source_delete = FALSE
)
}
\arguments{
\item{table}{A \code{lancedb_table} object.}
\item{data}{A \code{data.frame} or \code{arrow::Table} with the new/updated data.}
\item{on}{Character vector of column name(s) to join on.}
\item{when_matched_update_all}{Logical. If \code{TRUE}, update all columns when
the key matches an existing row. Default \code{TRUE}.}
\item{when_not_matched_insert_all}{Logical. If \code{TRUE}, insert new rows when
no match is found in the target. Default \code{TRUE}.}
\item{when_not_matched_by_source_delete}{Logical. If \code{TRUE}, delete target
rows that have no match in the source data. Default \code{FALSE}.}
}
\value{
The table (invisibly).
}
\description{
Performs a merge insert operation, joining new data against existing rows
on the specified key column(s). Supports upsert, insert-if-not-exists,
and replace-range patterns.
}
\examples{
\dontrun{
# Upsert: update existing rows, insert new ones
new_data <- data.frame(id = c(1, 2, 999), name = c("updated", "updated", "new"))
lancedb_merge_insert(tbl, new_data, on = "id")

# Insert only if not exists
lancedb_merge_insert(tbl, new_data, on = "id", when_matched_update_all = FALSE)
}
}
