% Generated by roxygen2: do not edit by hand
\name{lancedb_hybrid_search}
\alias{lancedb_hybrid_search}
\title{Create a Hybrid Search Query}
\usage{
lancedb_hybrid_search(
  table,
  query_vector,
  query_text,
  fts_columns = NULL,
  nprobes = NULL,
  refine_factor = NULL,
  ef = NULL,
  column = NULL,
  distance_type = NULL,
  norm = "rank"
)
}
\arguments{
\item{table}{A \code{lancedb_table} object.}
\item{query_vector}{A numeric vector to use as the vector search component.}
\item{query_text}{Character string. The full-text search query.}
\item{fts_columns}{Character vector. Optional FTS column names to search.
  If \code{NULL}, all FTS-indexed columns are searched.}
\item{nprobes}{Integer. Number of IVF partitions for vector search.}
\item{refine_factor}{Integer. PQ refinement multiplier.}
\item{ef}{Integer. HNSW search candidates.}
\item{column}{Character. Name of the vector column. Default \code{NULL}.}
\item{distance_type}{Character. Override distance metric (\code{"l2"},
  \code{"cosine"}, \code{"dot"}). Default \code{NULL}.}
\item{norm}{Character. Score normalization method for merging results:
  \code{"rank"} (reciprocal rank fusion, default) or \code{"score"}
  (score-based normalization).}
}
\value{
A \code{lancedb_lazy} object in \code{"hybrid"} mode.
}
\description{
Begins a lazy hybrid search that combines vector similarity and full-text
search (BM25) on a LanceDB table. Results are merged using the specified
normalization method (reciprocal rank fusion by default). Requires both a
vector index and an FTS index on the table.
}
\examples{
\dontrun{
library(dplyr)

# Create both vector and FTS indices
lancedb_create_index(tbl, "embedding", index_type = "ivf_pq",
                     metric = "cosine")
lancedb_create_index(tbl, "content", index_type = "fts",
                     with_position = TRUE, stem = TRUE)

# Hybrid search combining vector and text
results <- lancedb_hybrid_search(tbl, runif(128), "machine learning") \%>\%
  select(title, content) \%>\%
  slice_head(n = 10) \%>\%
  collect()

# With score-based normalization and cosine distance
results <- lancedb_hybrid_search(tbl, runif(128), "neural networks",
                                  norm = "score",
                                  column = "embedding",
                                  distance_type = "cosine") \%>\%
  collect()
}
}
\seealso{
\code{\link{lancedb_search}}, \code{\link{lancedb_fts_search}}
}
